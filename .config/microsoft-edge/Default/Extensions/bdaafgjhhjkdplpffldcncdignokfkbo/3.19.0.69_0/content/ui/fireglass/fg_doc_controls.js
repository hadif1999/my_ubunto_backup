!function(e){"use strict";(e.FG=e.FG||{}).popupControls=function(e,o){let n=e.utils.isNil,s=e.utils.isntNil,a=e.utils.isString,r=e.extensionAdapter,d=o.config,i={},u=null,c=o.config.add_dock_max_timeout;i.initDocument=()=>{if(o.helpers.get_dock_timeout(o.config.add_dock_max_timeout,function(e,t){c=t}),n(i.el_showhide)){let e=document.getElementById("showhide");e.addEventListener("click",function(e){o.helpers.isTrustedEvent(e)&&i._updateCtrlState(null)}),i.el_showhide=e}if(s(i.sessionInfo)){let e=i.sessionInfo;e.hasOwnProperty("urlCategory")&&d.dockConfig.urlCategory.onlineBanking===e.urlCategory&&e.hasOwnProperty("sslStatus")&&d.dockConfig.sslStatus.secure===e.sslStatus?document.body.setAttribute("category","banking"):document.body.setAttribute("category","general")}n(i.state)&&(i.state="expanded"),document.body.setAttribute("state",i.state),s(i.ctrl)&&document.body.setAttribute("ctrl",i.ctrl)},i.updateDocument=()=>{s(i.state)&&document.body.setAttribute("state",i.state)},i._updateCtrlState=e=>{n(e)&&(s=document.body.getAttribute("state"),e=n(s)||"expanded"===s?"collapsed":"expanded");let t={};"expanded"===e?t.remove=["collapsed"]:t.add=["collapsed"],document.body.setAttribute("state",e);var s={attributes:{state:e},styles:t};i._sendMessage(d.docControls.EVENT_ID,"dock_showhide",{fgdock_iframe:s,fgdoccontrols_iframe:s,fgdock_iframe_top:s,fgdock_iframe_left:s,fgdock_iframe_right:s},null)},i._sendMessage=(e,t,s,o)=>{r.sendMessage({type:"fg_message_proxy",id:d.uiMessageProxy.EVENT_ID,realId:e,data:{ctrl_id:t,elements:s,evt_type:o}})},i._onAttributeChange=function(e,t){for(var s of e)"attributes"===s.type&&"state"===s.attributeName&&("expanded"===s.target.getAttribute("state")?u=o.helpers.reset_timer(u,c,i._updateCtrlState):o.helpers.clear_timer(u))},i._attributeObserver=new MutationObserver(i._onAttributeChange),i._attributeObserver.observe(document.getElementById("fgdoc_controls_body"),{attributes:!0});const l=r.getExtensionURL("");return i._msgEventProc=function(e){var t=e.data;if(!n(t)){e=t.origin;if(0!=a(e)&&e===l)switch(t.msg_type){case"fg_doc_init":i.sessionInfo=t.session,i.state=t.state,i.ctrl=t.ctrl_type,i.initDocument();break;case"fg_dock_mouse_evt":if(t.evt_type===d.dockMouseEvent.eventType.mouseEnter)o.helpers.clear_timer(u);else if(t.evt_type===d.dockMouseEvent.eventType.mouseLeave){let e=document.getElementById("fgdoc_controls_body");s(e)&&"expanded"===e.getAttribute("state")&&(u=o.helpers.reset_timer(u,c,i._updateCtrlState))}}}},window.addEventListener("message",i._msgEventProc,!1),window.addEventListener("load",function(){setTimeout(function(){n(u)&&i._updateCtrlState("expanded")},d.add_dock_max_timeout)},!1),i}(e.SymBfw,e.FG)}(this);