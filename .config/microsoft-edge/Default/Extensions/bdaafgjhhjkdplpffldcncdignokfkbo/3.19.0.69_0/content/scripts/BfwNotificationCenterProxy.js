!function(i){"use strict";var o,n,s,a,r,c,e,l;i.SymBfw.notificationCenterProxy=(i=i.SymBfw,o=i.utils.isNil,n=i.utils.isntNil,s=i.logger,a=i.constants.uiConstants.NOTIFICATION,r=i.uiUtils,c=i.utils.isArray,e=i.extensionAdapter,l={timeoutShowNotification:null,getNotificationIframeID:function(){return a.IFRAME_ID+"-"+e.getExtensionId()},closeNotifications:function(){var i=l.getNotificationIframeID(),t=document.querySelectorAll("[id='"+i+"']");if(n(t))for(var e=0;e<t.length;e++){var o=t[e];document.documentElement.removeChild(o)}},handleMessage:function(i){switch(i.eventID){case a.MESSAGES.NOTIFICATION_QUEUE_MESSAGE:if(!c(i.notificationArray)){s.log("unexpected payload for NOTIFICATION_QUEUE_MESSAGE");break}n(l.timeoutShowNotification)&&clearTimeout(l.timeoutShowNotification),l.timeoutShowNotification=setTimeout(function(){l.notificationArray=i.notificationArray,0===l.notificationArray.length?l.closeNotifications():(l.setIsAllowed(l.notificationArray),l.showNotifications(),l.timeoutShowNotification=null)},100);break;case a.MESSAGES.HIDE_NOTIFICATIONS:l.closeNotifications();break;case a.MESSAGES.RESIZE_IFRAME_HEIGHT:var t=l.getNotificationIframeID(),e=document.getElementById(t),o=parseFloat(e.height);e.height=o+i.iframeHeight;break;case a.MESSAGES.FIXED_IFRAME_HEIGHT:t=l.getNotificationIframeID();(e=document.getElementById(t)).height=i.iframeHeight}},setIsAllowed:function(i){for(const t of i)l.isEmptyList(t.allowListedUrls)&&l.isEmptyList(t.blockListedUrls)?t.isAllowed=!0:l.isEmptyList(t.allowListedUrls)?t.isAllowed=!l.isPageUrlInList(t.blockListedUrls):t.isAllowed=l.isPageUrlInList(t.allowListedUrls)},isPageUrlInList:function(i){return!(l.isEmptyList(i)||!i.some(i=>i.startsWith(document.location.origin)))},isEmptyList:function(i){return!c(i)||0===i.length},showNotifications:function(){l.closeNotifications();var i=e.getExtensionURL(a.HTML),t=e.getExtensionURL(a.STYLE),t=(r.injectStyle(t),a.IFRAME_ID+"-"+e.getExtensionId());r.createFrame(t,i,a.HEIGHT,a.WIDTH)},addEventListener:function(){e.addContentScriptMessageListener(function(i,t,e){switch(i.id){case a.MESSAGES.DEFAULT_MESSAGE:return o(i.payload)?void 0:l.handleMessage(i.payload);case a.MESSAGES.UI_INIT_PROXY:return t({notifications:l.notificationArray,direction:r.getDirection()});default:return}})},initialize:function(){r.isTopLevelWindow()&&(l.addEventListener(),e.sendMessage({id:a.MESSAGES.DEFAULT_MESSAGE,payload:{eventID:a.MESSAGES.NOTIFICATION_QUEUE_MESSAGE}}))}},window.addEventListener("pageshow",function(i){i.persisted&&l.initialize()}),l.initialize(),l)}(window);