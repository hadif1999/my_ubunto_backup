!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.multiVariateTestingSDK=t():e.multiVariateTestingSDK=t()}(this,function(){return r=[function(e,t,r){"use strict";var a=r(1),n=t.ValidationError=function(e,t,r,n,a,i){Array.isArray(n)?(this.path=n,this.property=n.reduce(function(e,t){return e+c(t)},"instance")):void 0!==n&&(this.property=n),e&&(this.message=e),r&&(n=r.$id||r.id,this.schema=n||r),void 0!==t&&(this.instance=t),this.name=a,this.argument=i,this.stack=this.toString()},r=(n.prototype.toString=function(){return this.property+" "+this.message},t.ValidatorResult=function(e,t,r,n){this.instance=e,this.schema=t,this.options=r,this.path=n.path,this.propertyPath=n.propertyPath,this.errors=[],this.throwError=r&&r.throwError,this.throwFirst=r&&r.throwFirst,this.throwAll=r&&r.throwAll,this.disableFormat=r&&!0===r.disableFormat});function i(e,t){return t+": "+e.toString()+"\n"}function o(e){Error.captureStackTrace&&Error.captureStackTrace(this,o),this.instance=e.instance,this.schema=e.schema,this.options=e.options,this.errors=e.errors}r.prototype.addError=function(e){var t;if("string"==typeof e)t=new n(e,this.instance,this.schema,this.path);else{if(!e)throw new Error("Missing error detail");if(!e.message)throw new Error("Missing error message");if(!e.name)throw new Error("Missing validator type");t=new n(e.message,this.instance,this.schema,this.path,e.name,e.argument)}if(this.errors.push(t),this.throwFirst)throw new o(this);if(this.throwError)throw t;return t},r.prototype.importErrors=function(e){"string"==typeof e||e&&e.validatorType?this.addError(e):e&&e.errors&&Array.prototype.push.apply(this.errors,e.errors)},r.prototype.toString=function(e){return this.errors.map(i).join("")},Object.defineProperty(r.prototype,"valid",{get:function(){return!this.errors.length}}),(((e.exports.ValidatorResultError=o).prototype=new Error).constructor=o).prototype.name="Validation Error";var r=t.SchemaError=function e(t,r){this.message=t,this.schema=r,Error.call(this,t),Error.captureStackTrace(this,e)},s=(r.prototype=Object.create(Error.prototype,{constructor:{value:r,enumerable:!1},name:{value:"SchemaError",enumerable:!1}}),t.SchemaContext=function(e,t,r,n,a){this.schema=e,this.options=t,Array.isArray(r)?(this.path=r,this.propertyPath=r.reduce(function(e,t){return e+c(t)},"instance")):this.propertyPath=r,this.base=n,this.schemas=a}),u=(s.prototype.resolve=function(e){return a.resolve(this.base,e)},s.prototype.makeChild=function(e,t){var t=void 0===t?this.path:this.path.concat([t]),r=e.$id||e.id,n=a.resolve(this.base,r||""),t=new s(e,this.options,t,n,Object.create(this.schemas));return r&&!t.schemas[n]&&(t.schemas[n]=e),t},t.FORMAT_REGEXPS={"date-time":/^\d{4}-(?:0[0-9]{1}|1[0-2]{1})-(3[01]|0[1-9]|[12][0-9])[tT ](2[0-4]|[01][0-9]):([0-5][0-9]):(60|[0-5][0-9])(\.\d+)?([zZ]|[+-]([0-5][0-9]):(60|[0-5][0-9]))$/,date:/^\d{4}-(?:0[0-9]{1}|1[0-2]{1})-(3[01]|0[1-9]|[12][0-9])$/,time:/^(2[0-4]|[01][0-9]):([0-5][0-9]):(60|[0-5][0-9])$/,email:/^(?:[\w\!\#\$\%\&\'\*\+\-\/\=\?\^\`\{\|\}\~]+\.)*[\w\!\#\$\%\&\'\*\+\-\/\=\?\^\`\{\|\}\~]+@(?:(?:(?:[a-zA-Z0-9](?:[a-zA-Z0-9\-](?!\.)){0,61}[a-zA-Z0-9]?\.)+[a-zA-Z0-9](?:[a-zA-Z0-9\-](?!$)){0,61}[a-zA-Z0-9]?)|(?:\[(?:(?:[01]?\d{1,2}|2[0-4]\d|25[0-5])\.){3}(?:[01]?\d{1,2}|2[0-4]\d|25[0-5])\]))$/,"ip-address":/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/,ipv6:/^\s*((([0-9A-Fa-f]{1,4}:){7}([0-9A-Fa-f]{1,4}|:))|(([0-9A-Fa-f]{1,4}:){6}(:[0-9A-Fa-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){5}(((:[0-9A-Fa-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){4}(((:[0-9A-Fa-f]{1,4}){1,3})|((:[0-9A-Fa-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){3}(((:[0-9A-Fa-f]{1,4}){1,4})|((:[0-9A-Fa-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){2}(((:[0-9A-Fa-f]{1,4}){1,5})|((:[0-9A-Fa-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){1}(((:[0-9A-Fa-f]{1,4}){1,6})|((:[0-9A-Fa-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9A-Fa-f]{1,4}){1,7})|((:[0-9A-Fa-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(%.+)?\s*$/,uri:/^[a-zA-Z][a-zA-Z0-9+-.]*:[^\s]*$/,"uri-reference":/^(((([A-Za-z][+\-.0-9A-Za-z]*(:%[0-9A-Fa-f]{2}|:[!$&-.0-;=?-Z_a-z~]|[/?])|\?)(%[0-9A-Fa-f]{2}|[!$&-;=?-Z_a-z~])*|([A-Za-z][+\-.0-9A-Za-z]*:?)?)|([A-Za-z][+\-.0-9A-Za-z]*:)?\/((%[0-9A-Fa-f]{2}|\/((%[0-9A-Fa-f]{2}|[!$&-.0-9;=A-Z_a-z~])+|(\[(([Vv][0-9A-Fa-f]+\.[!$&-.0-;=A-Z_a-z~]+)?|[.0-:A-Fa-f]+)\])?)(:\d*)?[/?]|[!$&-.0-;=?-Z_a-z~])(%[0-9A-Fa-f]{2}|[!$&-;=?-Z_a-z~])*|(\/((%[0-9A-Fa-f]{2}|[!$&-.0-9;=A-Z_a-z~])+|(\[(([Vv][0-9A-Fa-f]+\.[!$&-.0-;=A-Z_a-z~]+)?|[.0-:A-Fa-f]+)\])?)(:\d*)?)?))#(%[0-9A-Fa-f]{2}|[!$&-;=?-Z_a-z~])*|(([A-Za-z][+\-.0-9A-Za-z]*)?%[0-9A-Fa-f]{2}|[!$&-.0-9;=@_~]|[A-Za-z][+\-.0-9A-Za-z]*[!$&-*,;=@_~])(%[0-9A-Fa-f]{2}|[!$&-.0-9;=@-Z_a-z~])*((([/?](%[0-9A-Fa-f]{2}|[!$&-;=?-Z_a-z~])*)?#|[/?])(%[0-9A-Fa-f]{2}|[!$&-;=?-Z_a-z~])*)?|([A-Za-z][+\-.0-9A-Za-z]*(:%[0-9A-Fa-f]{2}|:[!$&-.0-;=?-Z_a-z~]|[/?])|\?)(%[0-9A-Fa-f]{2}|[!$&-;=?-Z_a-z~])*|([A-Za-z][+\-.0-9A-Za-z]*:)?\/((%[0-9A-Fa-f]{2}|\/((%[0-9A-Fa-f]{2}|[!$&-.0-9;=A-Z_a-z~])+|(\[(([Vv][0-9A-Fa-f]+\.[!$&-.0-;=A-Z_a-z~]+)?|[.0-:A-Fa-f]+)\])?)(:\d*)?[/?]|[!$&-.0-;=?-Z_a-z~])(%[0-9A-Fa-f]{2}|[!$&-;=?-Z_a-z~])*|\/((%[0-9A-Fa-f]{2}|[!$&-.0-9;=A-Z_a-z~])+(:\d*)?|(\[(([Vv][0-9A-Fa-f]+\.[!$&-.0-;=A-Z_a-z~]+)?|[.0-:A-Fa-f]+)\])?:\d*|\[(([Vv][0-9A-Fa-f]+\.[!$&-.0-;=A-Z_a-z~]+)?|[.0-:A-Fa-f]+)\])?)?|[A-Za-z][+\-.0-9A-Za-z]*:?)?$/,color:/^(#?([0-9A-Fa-f]{3}){1,2}\b|aqua|black|blue|fuchsia|gray|green|lime|maroon|navy|olive|orange|purple|red|silver|teal|white|yellow|(rgb\(\s*\b([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\b\s*,\s*\b([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\b\s*,\s*\b([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\b\s*\))|(rgb\(\s*(\d?\d%|100%)+\s*,\s*(\d?\d%|100%)+\s*,\s*(\d?\d%|100%)+\s*\)))$/,hostname:/^(?=.{1,255}$)[0-9A-Za-z](?:(?:[0-9A-Za-z]|-){0,61}[0-9A-Za-z])?(?:\.[0-9A-Za-z](?:(?:[0-9A-Za-z]|-){0,61}[0-9A-Za-z])?)*\.?$/,"host-name":/^(?=.{1,255}$)[0-9A-Za-z](?:(?:[0-9A-Za-z]|-){0,61}[0-9A-Za-z])?(?:\.[0-9A-Za-z](?:(?:[0-9A-Za-z]|-){0,61}[0-9A-Za-z])?)*\.?$/,alpha:/^[a-zA-Z]+$/,alphanumeric:/^[a-zA-Z0-9]+$/,"utc-millisec":function(e){return"string"==typeof e&&parseFloat(e)===parseInt(e,10)&&!isNaN(e)},regex:function(e){var t=!0;try{new RegExp(e)}catch(e){t=!1}return t},style:/\s*(.+?):\s*([^;]+);?/,phone:/^\+(?:[0-9] ?){6,14}[0-9]$/}),c=(u.regexp=u.regex,u.pattern=u.regex,u.ipv4=u["ip-address"],t.isFormat=function(e,t,r){if("string"==typeof e&&void 0!==u[t]){if(u[t]instanceof RegExp)return u[t].test(e);if("function"==typeof u[t])return u[t](e)}else if(r&&r.customFormats&&"function"==typeof r.customFormats[t])return r.customFormats[t](e);return!0},t.makeSuffix=function(e){return(e=e.toString()).match(/[.\s\[\]]/)||e.match(/^[\d]/)?e.match(/^\d+$/)?"["+e+"]":"["+JSON.stringify(e)+"]":"."+e});function l(e,t){var r=Array.isArray(t),n=r?[]:{};return r?(n=n.concat(e=e||[]),t.forEach(function(e,t,r,n){"object"==typeof r?t[n]=l(e[n],r):-1===e.indexOf(r)&&t.push(r)}.bind(null,e,n))):(e&&"object"==typeof e&&Object.keys(e).forEach(function(e,t,r){t[r]=e[r]}.bind(null,e,n)),Object.keys(t).forEach(function(e,t,r,n){"object"==typeof t[n]&&t[n]&&e[n]?r[n]=l(e[n],t[n]):r[n]=t[n]}.bind(null,e,t,n))),n}function h(e){return"/"+encodeURIComponent(e).replace(/~/g,"%7E")}t.deepCompareStrict=function r(n,a){if(typeof n!=typeof a)return!1;if(Array.isArray(n))return!!Array.isArray(a)&&n.length===a.length&&n.every(function(e,t){return r(n[t],a[t])});if("object"!=typeof n)return n===a;if(!n||!a)return n===a;var e=Object.keys(n),t=Object.keys(a);return e.length===t.length&&e.every(function(e){return r(n[e],a[e])})},e.exports.deepMerge=l,t.objectGetPath=function(e,t){for(var r=t.split("/").slice(1);"string"==typeof(n=r.shift());){var n=decodeURIComponent(n.replace(/~0/,"~").replace(/~1/g,"/"));if(!(n in e))return;e=e[n]}return e},t.encodePath=function(e){return e.map(h).join("")},t.getDecimalPlaces=function(e){var t=0;if(isNaN(e))return t;e=(e="number"!=typeof e?Number(e):e).toString().split("e");if(2===e.length){if("-"!==e[1][0])return t;t=Number(e[1].slice(1))}e=e[0].split(".");return 2===e.length&&(t+=e[1].length),t},t.isSchema=function(e){return"object"==typeof e&&e||"boolean"==typeof e}},function(e,t,r){"use strict";var x=r(5),E=r(8);function A(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}t.parse=a,t.resolve=function(e,t){return a(e,!1,!0).resolve(t)},t.resolveObject=function(e,t){return e?a(e,!1,!0).resolveObject(t):t},t.format=function(e){return(e=E.isString(e)?a(e):e)instanceof A?e.format():A.prototype.format.call(e)},t.Url=A;var O=/^([a-z0-9.+-]+:)/i,n=/:[0-9]*$/,_=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,t=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),j=["'"].concat(t),R=["%","/","?",";","#"].concat(j),I=["/","?","#"],F=/^[+a-z0-9A-Z_-]{0,63}$/,C=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,T={javascript:!0,"javascript:":!0},P={javascript:!0,"javascript:":!0},$={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},z=r(9);function a(e,t,r){if(e&&E.isObject(e)&&e instanceof A)return e;var n=new A;return n.parse(e,t,r),n}A.prototype.parse=function(e,t,r){if(!E.isString(e))throw new TypeError("Parameter 'url' must be a string, not "+typeof e);var n=e.indexOf("?"),n=-1!==n&&n<e.indexOf("#")?"?":"#",a=e.split(n);a[0]=a[0].replace(/\\/g,"/");var i=(i=e=a.join(n)).trim();if(!r&&1===e.split("#").length){a=_.exec(i);if(a)return this.path=i,this.href=i,this.pathname=a[1],a[2]?(this.search=a[2],this.query=t?z.parse(this.search.substr(1)):this.search.substr(1)):t&&(this.search="",this.query={}),this}var o,n=O.exec(i);if(n&&(o=(n=n[0]).toLowerCase(),this.protocol=o,i=i.substr(n.length)),!(r||n||i.match(/^\/\/[^@\/]+@[^@\/]+/))||!(w="//"===i.substr(0,2))||n&&P[n]||(i=i.substr(2),this.slashes=!0),!P[n]&&(w||n&&!$[n])){for(var s,u=-1,c=0;c<I.length;c++)-1!==(s=i.indexOf(I[c]))&&(-1===u||s<u)&&(u=s);for(-1!==(e=-1===u?i.lastIndexOf("@"):i.lastIndexOf("@",u))&&(a=i.slice(0,e),i=i.slice(e+1),this.auth=decodeURIComponent(a)),u=-1,c=0;c<R.length;c++)-1!==(s=i.indexOf(R[c]))&&(-1===u||s<u)&&(u=s);-1===u&&(u=i.length),this.host=i.slice(0,u),i=i.slice(u),this.parseHost(),this.hostname=this.hostname||"";r="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!r)for(var l=this.hostname.split(/\./),h=(c=0,l.length);c<h;c++){var f=l[c];if(f&&!f.match(F)){for(var p="",d=0,m=f.length;d<m;d++)127<f.charCodeAt(d)?p+="x":p+=f[d];if(!p.match(F)){var g=l.slice(0,c),y=l.slice(c+1),v=f.match(C);v&&(g.push(v[1]),y.unshift(v[2])),y.length&&(i="/"+y.join(".")+i),this.hostname=g.join(".");break}}}255<this.hostname.length?this.hostname="":this.hostname=this.hostname.toLowerCase(),r||(this.hostname=x.toASCII(this.hostname));var b=this.port?":"+this.port:"",w=this.hostname||"";this.host=w+b,this.href+=this.host,r&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==i[0]&&(i="/"+i))}if(!T[o])for(c=0,h=j.length;c<h;c++){var A,S=j[c];-1!==i.indexOf(S)&&((A=encodeURIComponent(S))===S&&(A=escape(S)),i=i.split(S).join(A))}n=i.indexOf("#"),-1!==n&&(this.hash=i.substr(n),i=i.slice(0,n)),e=i.indexOf("?");return-1!==e?(this.search=i.substr(e),this.query=i.substr(e+1),t&&(this.query=z.parse(this.query)),i=i.slice(0,e)):t&&(this.search="",this.query={}),i&&(this.pathname=i),$[o]&&this.hostname&&!this.pathname&&(this.pathname="/"),(this.pathname||this.search)&&(b=this.pathname||"",a=this.search||"",this.path=b+a),this.href=this.format(),this},A.prototype.format=function(){var e=this.auth||"",t=(e&&(e=(e=encodeURIComponent(e)).replace(/%3A/i,":"),e+="@"),this.protocol||""),r=this.pathname||"",n=this.hash||"",a=!1,i="",e=(this.host?a=e+this.host:this.hostname&&(a=e+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(a+=":"+this.port)),this.query&&E.isObject(this.query)&&Object.keys(this.query).length&&(i=z.stringify(this.query)),this.search||i&&"?"+i||"");return t&&":"!==t.substr(-1)&&(t+=":"),this.slashes||(!t||$[t])&&!1!==a?(a="//"+(a||""),r&&"/"!==r.charAt(0)&&(r="/"+r)):a=a||"",n&&"#"!==n.charAt(0)&&(n="#"+n),e&&"?"!==e.charAt(0)&&(e="?"+e),t+a+(r=r.replace(/[?#]/g,function(e){return encodeURIComponent(e)}))+(e=e.replace("#","%23"))+n},A.prototype.resolve=function(e){return this.resolveObject(a(e,!1,!0)).format()},A.prototype.resolveObject=function(e){E.isString(e)&&((f=new A).parse(e,!1,!0),e=f);for(var t=new A,r=Object.keys(this),n=0;n<r.length;n++){var a=r[n];t[a]=this[a]}if(t.hash=e.hash,""===e.href)return t.href=t.format(),t;if(e.slashes&&!e.protocol){for(var i=Object.keys(e),o=0;o<i.length;o++){var s=i[o];"protocol"!==s&&(t[s]=e[s])}return $[t.protocol]&&t.hostname&&!t.pathname&&(t.path=t.pathname="/"),t.href=t.format(),t}if(e.protocol&&e.protocol!==t.protocol){if(!$[e.protocol]){for(var u=Object.keys(e),c=0;c<u.length;c++){var l=u[c];t[l]=e[l]}return t.href=t.format(),t}if(t.protocol=e.protocol,e.host||P[e.protocol])t.pathname=e.pathname;else{for(var h=(e.pathname||"").split("/");h.length&&!(e.host=h.shift()););e.host||(e.host=""),e.hostname||(e.hostname=""),""!==h[0]&&h.unshift(""),h.length<2&&h.unshift(""),t.pathname=h.join("/")}return t.search=e.search,t.query=e.query,t.host=e.host||"",t.auth=e.auth,t.hostname=e.hostname||e.host,t.port=e.port,(t.pathname||t.search)&&(f=t.pathname||"",p=t.search||"",t.path=f+p),t.slashes=t.slashes||e.slashes,t.href=t.format(),t}var f=t.pathname&&"/"===t.pathname.charAt(0),p=e.host||e.pathname&&"/"===e.pathname.charAt(0),f=p||f||t.host&&e.pathname,d=f,m=t.pathname&&t.pathname.split("/")||[],g=(h=e.pathname&&e.pathname.split("/")||[],t.protocol&&!$[t.protocol]);if(g&&(t.hostname="",t.port=null,t.host&&(""===m[0]?m[0]=t.host:m.unshift(t.host)),t.host="",e.protocol&&(e.hostname=null,e.port=null,e.host&&(""===h[0]?h[0]=e.host:h.unshift(e.host)),e.host=null),f=f&&(""===h[0]||""===m[0])),p)t.host=(e.host||""===e.host?e:t).host,t.hostname=(e.hostname||""===e.hostname?e:t).hostname,t.search=e.search,t.query=e.query,m=h;else if(h.length)(m=m||[]).pop(),m=m.concat(h),t.search=e.search,t.query=e.query;else if(!E.isNullOrUndefined(e.search))return g&&(t.hostname=t.host=m.shift(),(w=!!(t.host&&0<t.host.indexOf("@"))&&t.host.split("@"))&&(t.auth=w.shift(),t.host=t.hostname=w.shift())),t.search=e.search,t.query=e.query,E.isNull(t.pathname)&&E.isNull(t.search)||(t.path=(t.pathname||"")+(t.search||"")),t.href=t.format(),t;if(!m.length)return t.pathname=null,t.search?t.path="/"+t.search:t.path=null,t.href=t.format(),t;for(var y=m.slice(-1)[0],p=(t.host||e.host||1<m.length)&&("."===y||".."===y)||""===y,v=0,b=m.length;0<=b;b--)"."===(y=m[b])?m.splice(b,1):".."===y?(m.splice(b,1),v++):v&&(m.splice(b,1),v--);if(!f&&!d)for(;v--;)m.unshift("..");!f||""===m[0]||m[0]&&"/"===m[0].charAt(0)||m.unshift(""),p&&"/"!==m.join("/").substr(-1)&&m.push("");var w,d=""===m[0]||m[0]&&"/"===m[0].charAt(0);return g&&(t.hostname=t.host=!d&&m.length?m.shift():"",(w=!!(t.host&&0<t.host.indexOf("@"))&&t.host.split("@"))&&(t.auth=w.shift(),t.host=t.hostname=w.shift())),(f=f||t.host&&m.length)&&!d&&m.unshift(""),m.length?t.pathname=m.join("/"):(t.pathname=null,t.path=null),E.isNull(t.pathname)&&E.isNull(t.search)||(t.path=(t.pathname||"")+(t.search||"")),t.auth=e.auth||t.auth,t.slashes=t.slashes||e.slashes,t.href=t.format(),t},A.prototype.parseHost=function(){var e=this.host,t=n.exec(e);t&&(":"!==(t=t[0])&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)}},function(e,t,r){"use strict";var u=r(1),c=r(0);function l(e,t){this.id=e,this.ref=t}e.exports.SchemaScanResult=l,e.exports.scan=function(e,t){function n(e,t){if(t&&"object"==typeof t)if(t.$ref){var r=u.resolve(e,t.$ref);s[r]=s[r]?s[r]+1:0}else{r=t.$id||t.id,r=r?u.resolve(e,r):e;if(r){if(r.indexOf("#")<0&&(r+="#"),o[r]){if(c.deepCompareStrict(o[r],t))return o[r];throw new Error("Schema <"+r+"> already exists with different definition")}o[r]=t,"#"==r[r.length-1]&&(o[r.substring(0,r.length-1)]=t)}a(r+"/items",Array.isArray(t.items)?t.items:[t.items]),a(r+"/extends",Array.isArray(t.extends)?t.extends:[t.extends]),n(r+"/additionalItems",t.additionalItems),i(r+"/properties",t.properties),n(r+"/additionalProperties",t.additionalProperties),i(r+"/definitions",t.definitions),i(r+"/patternProperties",t.patternProperties),i(r+"/dependencies",t.dependencies),a(r+"/disallow",t.disallow),a(r+"/allOf",t.allOf),a(r+"/anyOf",t.anyOf),a(r+"/oneOf",t.oneOf),n(r+"/not",t.not)}}function a(e,t){if(Array.isArray(t))for(var r=0;r<t.length;r++)n(e+"/"+r,t[r])}function i(e,t){if(t&&"object"==typeof t)for(var r in t)n(e+"/"+r,t[r])}var o={},s={};return n(e,t),new l(o,s)}},function(e,t,r){"use strict";var n=e.exports.Validator=r(4);e.exports.ValidatorResult=r(0).ValidatorResult,e.exports.ValidatorResultError=r(0).ValidatorResultError,e.exports.ValidationError=r(0).ValidationError,e.exports.SchemaError=r(0).SchemaError,e.exports.SchemaScanResult=r(2).SchemaScanResult,e.exports.scan=r(2).scan,e.exports.validate=function(e,t,r){return(new n).validate(e,t,r)}},function(e,t,r){"use strict";function n(){this.customFormats=Object.create(n.prototype.customFormats),this.schemas={},this.unresolvedRefs=[],this.types=Object.create(a),this.attributes=Object.create(h.validators)}var c=r(1),h=r(12),f=r(0),l=r(2).scan,p=f.ValidatorResult,d=f.ValidatorResultError,m=f.SchemaError,g=f.SchemaContext;function y(e){e="string"==typeof e?e:e.$ref;return"string"==typeof e&&e}n.prototype.customFormats={},n.prototype.schemas=null,n.prototype.types=null,n.prototype.attributes=null,n.prototype.unresolvedRefs=null,n.prototype.addSchema=function(e,t){var r=this;if(!e)return null;var n,a=l(t||"/",e),t=t||e.$id||e.id;for(n in a.id)this.schemas[n]=a.id[n];for(n in a.ref)this.unresolvedRefs.push(n);return this.unresolvedRefs=this.unresolvedRefs.filter(function(e){return void 0===r.schemas[e]}),this.schemas[t]},n.prototype.addSubSchemaArray=function(e,t){if(Array.isArray(t))for(var r=0;r<t.length;r++)this.addSubSchema(e,t[r])},n.prototype.addSubSchemaObject=function(e,t){if(t&&"object"==typeof t)for(var r in t)this.addSubSchema(e,t[r])},n.prototype.setSchemas=function(e){this.schemas=e},n.prototype.getSchema=function(e){return this.schemas[e]},n.prototype.validate=function(e,t,r,n){if("boolean"!=typeof t&&"object"!=typeof t||null===t)throw new m("Expected `schema` to be an object or boolean");var a,i=t.$id||t.id,i=c.resolve((r=r||{}).base||"/",i||"");if(!n){(n=new g(t,r,[],i,Object.create(this.schemas))).schemas[i]||(n.schemas[i]=t);var o,s=l(i,t);for(o in s.id){var u=s.id[o];n.schemas[o]=u}}if(r.required&&void 0===e)return(a=new p(e,t,r,n)).addError("is required, but is undefined"),a;if(!(a=this.validateSchema(e,t,r,n)))throw new Error("Result undefined");if(r.throwAll&&a.errors.length)throw new d(a);return a},n.prototype.validateSchema=function(e,t,r,n){var a=new p(e,t,r,n);if("boolean"==typeof t)!0===t?t={}:!1===t&&(t={type:[]});else if(!t)throw new Error("schema is undefined");t.extends&&(Array.isArray(t.extends)?(t.extends.forEach(this.schemaTraverser.bind(this,o={schema:t,ctx:n})),t=o.schema,o.schema=null,o.ctx=null,o=null):t=f.deepMerge(t,this.superResolve(t.extends,n)));var i,o=y(t);if(o)return o=this.resolve(t,o,n),i=new g(o.subschema,r,n.path,o.switchSchema,n.schemas),this.validateSchema(e,o.subschema,r,i);var s,u=r&&r.skipAttributes||[];for(s in t)if(!h.ignoreProperties[s]&&u.indexOf(s)<0){var c=null,l=this.attributes[s];if(l)c=l.call(this,e,t,r,n);else if(!1===r.allowUnknownAttributes)throw new m("Unsupported attribute: "+s,t);c&&a.importErrors(c)}return"function"==typeof r.rewrite&&(o=r.rewrite.call(this,e,t,r,n),a.instance=o),a},n.prototype.schemaTraverser=function(e,t){e.schema=f.deepMerge(e.schema,this.superResolve(t,e.ctx))},n.prototype.superResolve=function(e,t){var r=y(e);return r?this.resolve(e,r,t).subschema:e},n.prototype.resolve=function(e,t,r){if(t=r.resolve(t),r.schemas[t])return{subschema:r.schemas[t],switchSchema:t};var n=c.parse(t),n=n&&n.hash,a=n&&n.length&&t.substr(0,t.length-n.length);if(!a||!r.schemas[a])throw new m("no such schema <"+t+">",e);r=f.objectGetPath(r.schemas[a],n.substr(1));if(void 0===r)throw new m("no such schema "+n+" located in <"+a+">",e);return{subschema:r,switchSchema:t}},n.prototype.testType=function(e,t,r,n,a){if(void 0!==a){if(null===a)throw new m('Unexpected null in "type" keyword');return"function"==typeof this.types[a]?this.types[a].call(this,e):!a||"object"!=typeof a||(void 0===(e=this.validateSchema(e,a,r,n))||!(e&&e.errors.length))}};var a=n.prototype.types={string:function(e){return"string"==typeof e},number:function(e){return"number"==typeof e&&isFinite(e)},integer:function(e){return"number"==typeof e&&e%1==0},boolean:function(e){return"boolean"==typeof e},array:function(e){return Array.isArray(e)},null:function(e){return null===e},date:function(e){return e instanceof Date},any:function(e){return!0},object:function(e){return e&&"object"==typeof e&&!Array.isArray(e)&&!(e instanceof Date)}};e.exports=n},function(e,h,f){!function(e,t){var r,g,n,a,i,o,y,v;function b(e){throw new RangeError(o[e])}function s(e,t){for(var r=e.length,n=[];r--;)n[r]=t(e[r]);return n}function u(e,t){var r=e.split("@"),n="";return 1<r.length&&(n=r[0]+"@",e=r[1]),n+s((e=e.replace(i,".")).split("."),t).join(".")}function w(e){for(var t,r,n=[],a=0,i=e.length;a<i;)55296<=(t=e.charCodeAt(a++))&&t<=56319&&a<i?56320==(64512&(r=e.charCodeAt(a++)))?n.push(((1023&t)<<10)+(1023&r)+65536):(n.push(t),a--):n.push(t);return n}function d(e){return s(e,function(e){var t="";return 65535<e&&(t+=v((e-=65536)>>>10&1023|55296),e=56320|1023&e),t+v(e)}).join("")}function A(e,t){return e+22+75*(e<26)-((0!=t)<<5)}function S(e,t,r){var n=0;for(e=r?y(e/700):e>>1,e+=y(e/t);455<e;n+=36)e=y(e/35);return y(n+36*e/(e+38))}function c(e){var t,r,n,a,i,o,s,u,c=[],l=e.length,h=0,f=128,p=72;for((r=e.lastIndexOf("-"))<0&&(r=0),n=0;n<r;++n)128<=e.charCodeAt(n)&&b("not-basic"),c.push(e.charCodeAt(n));for(a=0<r?r+1:0;a<l;){for(i=h,o=1,s=36;l<=a&&b("invalid-input"),(36<=(u=(u=e.charCodeAt(a++))-48<10?u-22:u-65<26?u-65:u-97<26?u-97:36)||u>y((g-h)/o))&&b("overflow"),h+=u*o,!(u<(u=s<=p?1:p+26<=s?26:s-p));s+=36)o>y(g/(u=36-u))&&b("overflow"),o*=u;p=S(h-i,t=c.length+1,0==i),y(h/t)>g-f&&b("overflow"),f+=y(h/t),h%=t,c.splice(h++,0,f)}return d(c)}function l(e){for(var t,r,n,a,i,o,s,u,c,l=[],h=(e=w(e)).length,f=128,p=0,d=72,m=0;m<h;++m)(o=e[m])<128&&l.push(v(o));for(t=r=l.length,r&&l.push("-");t<h;){for(n=g,m=0;m<h;++m)(o=e[m])>=f&&o<n&&(n=o);for(n-f>y((g-p)/(s=t+1))&&b("overflow"),p+=(n-f)*s,f=n,m=0;m<h;++m)if((o=e[m])<f&&++p>g&&b("overflow"),o==f){for(a=p,i=36;!(a<(u=i<=d?1:d+26<=i?26:i-d));i+=36)l.push(v(A(u+(c=a-u)%(u=36-u),0))),a=y(c/u);l.push(v(A(a,0))),d=S(p,s,t==r),p=0,++t}++p,++f}return l.join("")}h&&h.nodeType,e&&e.nodeType,(t="object"==typeof t&&t).global!==t&&t.window!==t&&t.self,g=2147483647,n=/^xn--/,a=/[^\x20-\x7E]/,i=/[\x2E\u3002\uFF0E\uFF61]/g,o={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},y=Math.floor,v=String.fromCharCode,r={version:"1.4.1",ucs2:{decode:w,encode:d},decode:c,encode:l,toASCII:function(e){return u(e,function(e){return a.test(e)?"xn--"+l(e):e})},toUnicode:function(e){return u(e,function(e){return n.test(e)?c(e.slice(4).toLowerCase()):e})}},void 0!==(t=function(){return r}.call(h,f,h,e))&&(e.exports=t)}.call(this,f(6)(e),f(7))},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t){var r=function(){return this}();try{r=r||new Function("return this")()}catch(e){"object"==typeof window&&(r=window)}e.exports=r},function(e,t,r){"use strict";e.exports={isString:function(e){return"string"==typeof e},isObject:function(e){return"object"==typeof e&&null!==e},isNull:function(e){return null===e},isNullOrUndefined:function(e){return null==e}}},function(e,t,r){"use strict";t.decode=t.parse=r(10),t.encode=t.stringify=r(11)},function(e,t,r){"use strict";e.exports=function(e,t,r,n){r=r||"=";var a={};if("string"!=typeof e||0===e.length)return a;var i=/\+/g,t=(e=e.split(t=t||"&"),1e3),o=(n&&"number"==typeof n.maxKeys&&(t=n.maxKeys),e.length);0<t&&t<o&&(o=t);for(var s=0;s<o;++s){var u,c=e[s].replace(i,"%20"),l=c.indexOf(r),l=0<=l?(u=c.substr(0,l),c.substr(l+1)):(u=c,""),c=decodeURIComponent(u),l=decodeURIComponent(l);Object.prototype.hasOwnProperty.call(a,c)?h(a[c])?a[c].push(l):a[c]=[a[c],l]:a[c]=l}return a};var h=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)}},function(e,t,r){"use strict";function i(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}}e.exports=function(r,n,a,e){return n=n||"&",a=a||"=","object"==typeof(r=null===r?void 0:r)?s(u(r),function(e){var t=encodeURIComponent(i(e))+a;return o(r[e])?s(r[e],function(e){return t+encodeURIComponent(i(e))}).join(n):t+encodeURIComponent(i(r[e]))}).join(n):e?encodeURIComponent(i(e))+a+encodeURIComponent(i(r)):""};var o=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)};function s(e,t){if(e.map)return e.map(t);for(var r=[],n=0;n<e.length;n++)r.push(t(e[n],n));return r}var u=Object.keys||function(e){var t,r=[];for(t in e)Object.prototype.hasOwnProperty.call(e,t)&&r.push(t);return r}},function(e,t,r){"use strict";var u=r(0),h=u.ValidatorResult,f=u.SchemaError,r={ignoreProperties:{id:!0,default:!0,description:!0,title:!0,additionalItems:!0,then:!0,else:!0,$schema:!0,$ref:!0,extends:!0}},n=r.validators={};function s(e,t,r,n,a){var i=t.throwError,o=t.throwAll,e=(t.throwError=!1,t.throwAll=!1,this.validateSchema(e,a,t,r));return t.throwError=i,t.throwAll=o,!e.valid&&n instanceof Function&&n(e),e.valid}function c(e,t){if(Object.hasOwnProperty.call(e,t))return e[t];if(t in e)for(;e=Object.getPrototypeOf(e);)if(Object.propertyIsEnumerable.call(e,t))return e[t]}function p(e,t,r,n,a,i){!this.types.object(e)||t.properties&&void 0!==t.properties[a]||(!1===t.additionalProperties?i.addError({name:"additionalProperties",argument:a,message:"is not allowed to have the additional property "+JSON.stringify(a)}):(t=t.additionalProperties||{},"function"==typeof r.preValidateProperty&&r.preValidateProperty(e,a,t,r,n),(e=this.validateSchema(e[a],t,r,n.makeChild(t,a))).instance!==i.instance[a]&&(i.instance[a]=e.instance),i.importErrors(e)))}n.type=function(e,t,r,n){if(void 0===e)return null;var a=new h(e,t,r,n),i=Array.isArray(t.type)?t.type:[t.type];return i.some(this.testType.bind(this,e,t,r,n))||(e=i.map(function(e){var t;if(e)return(t=e.$id||e.id)?"<"+t+">":e+""}),a.addError({name:"type",argument:e,message:"is not of a type(s) "+e})),a},n.anyOf=function(e,t,r,n){if(void 0===e)return null;var a=new h(e,t,r,n),i=new h(e,t,r,n);if(Array.isArray(t.anyOf))return t.anyOf.some(s.bind(this,e,r,n,function(e){i.importErrors(e)}))||(e=t.anyOf.map(function(e,t){var r=e.$id||e.id;return r?"<"+r+">":e.title&&JSON.stringify(e.title)||e.$ref&&"<"+e.$ref+">"||"[subschema "+t+"]"}),r.nestedErrors&&a.importErrors(i),a.addError({name:"anyOf",argument:e,message:"is not any of "+e.join(",")})),a;throw new f("anyOf must be an array")},n.allOf=function(n,e,a,i){if(void 0===n)return null;if(!Array.isArray(e.allOf))throw new f("allOf must be an array");var o=new h(n,e,a,i),s=this;return e.allOf.forEach(function(e,t){var r=s.validateSchema(n,e,a,i);r.valid||(e=e.$id||e.id||e.title&&JSON.stringify(e.title)||e.$ref&&"<"+e.$ref+">"||"[subschema "+t+"]",o.addError({name:"allOf",argument:{id:e,length:r.errors.length,valid:r},message:"does not match allOf schema "+e+" with "+r.errors.length+" error[s]:"}),o.importErrors(r))}),o},n.oneOf=function(e,t,r,n){if(void 0===e)return null;if(!Array.isArray(t.oneOf))throw new f("oneOf must be an array");var a=new h(e,t,r,n),i=new h(e,t,r,n),e=t.oneOf.filter(s.bind(this,e,r,n,function(e){i.importErrors(e)})).length,n=t.oneOf.map(function(e,t){return e.$id||e.id||e.title&&JSON.stringify(e.title)||e.$ref&&"<"+e.$ref+">"||"[subschema "+t+"]"});return 1!==e&&(r.nestedErrors&&a.importErrors(i),a.addError({name:"oneOf",argument:n,message:"is not exactly one from "+n.join(",")})),a},n.if=function(e,t,r,n){if(void 0===e)return null;if(!u.isSchema(t.if))throw new Error('Expected "if" keyword to be a schema');var a,i=s.call(this,e,r,n,null,t.if),o=new h(e,t,r,n);if(i){if(void 0===t.then)return;if(!u.isSchema(t.then))throw new Error('Expected "then" keyword to be a schema');a=this.validateSchema(e,t.then,r,n.makeChild(t.then)),o.importErrors(a)}else{if(void 0===t.else)return;if(!u.isSchema(t.else))throw new Error('Expected "else" keyword to be a schema');a=this.validateSchema(e,t.else,r,n.makeChild(t.else)),o.importErrors(a)}return o},n.propertyNames=function(e,t,r,n){if(this.types.object(e)){var a,i,o=new h(e,t,r,n),s=void 0!==t.propertyNames?t.propertyNames:{};if(!u.isSchema(s))throw new f('Expected "propertyNames" to be a schema (object or boolean)');for(a in e)void 0!==c(e,a)&&(i=this.validateSchema(a,s,r,n.makeChild(s)),o.importErrors(i));return o}},n.properties=function(e,t,r,n){if(this.types.object(e)){var a,i=new h(e,t,r,n),o=t.properties||{};for(a in o){var s=o[a];if(void 0!==s){if(null===s)throw new f('Unexpected null, expected schema in "properties"');"function"==typeof r.preValidateProperty&&r.preValidateProperty(e,a,s,r,n);var u=c(e,a),u=this.validateSchema(u,s,r,n.makeChild(s,a));u.instance!==i.instance[a]&&(i.instance[a]=u.instance),i.importErrors(u)}}return i}},n.patternProperties=function(e,t,r,n){if(this.types.object(e)){var a,i=new h(e,t,r,n),o=t.patternProperties||{};for(a in e){var s,u=!0;for(s in o){var c=o[s];if(void 0!==c){if(null===c)throw new f('Unexpected null, expected schema in "patternProperties"');try{var l=new RegExp(s,"u")}catch(e){l=new RegExp(s)}l.test(a)&&(u=!1,"function"==typeof r.preValidateProperty&&r.preValidateProperty(e,a,c,r,n),(c=this.validateSchema(e[a],c,r,n.makeChild(c,a))).instance!==i.instance[a]&&(i.instance[a]=c.instance),i.importErrors(c))}}u&&p.call(this,e,t,r,n,a,i)}return i}},n.additionalProperties=function(e,t,r,n){if(this.types.object(e)){if(t.patternProperties)return null;var a,i=new h(e,t,r,n);for(a in e)p.call(this,e,t,r,n,a,i);return i}},n.minProperties=function(e,t,r,n){if(this.types.object(e))return r=new h(e,t,r,n),Object.keys(e).length>=t.minProperties||r.addError({name:"minProperties",argument:t.minProperties,message:"does not meet minimum property length of "+t.minProperties}),r},n.maxProperties=function(e,t,r,n){if(this.types.object(e))return r=new h(e,t,r,n),Object.keys(e).length<=t.maxProperties||r.addError({name:"maxProperties",argument:t.maxProperties,message:"does not meet maximum property length of "+t.maxProperties}),r},n.items=function(e,n,a,i){var o,s=this;if(this.types.array(e)&&n.items)return o=new h(e,n,a,i),e.every(function(e,t){var r=Array.isArray(n.items)?n.items[t]||n.additionalItems:n.items;if(void 0===r)return!0;if(!1===r)return o.addError({name:"items",message:"additionalItems not permitted"}),!1;e=s.validateSchema(e,r,a,i.makeChild(r,t));return e.instance!==o.instance[t]&&(o.instance[t]=e.instance),o.importErrors(e),!0}),o},n.minimum=function(e,t,r,n){if(this.types.number(e))return r=new h(e,t,r,n),t.exclusiveMinimum&&!0===t.exclusiveMinimum?e>t.minimum||r.addError({name:"minimum",argument:t.minimum,message:"must be greater than "+t.minimum}):e>=t.minimum||r.addError({name:"minimum",argument:t.minimum,message:"must be greater than or equal to "+t.minimum}),r},n.maximum=function(e,t,r,n){if(this.types.number(e))return r=new h(e,t,r,n),t.exclusiveMaximum&&!0===t.exclusiveMaximum?e<t.maximum||r.addError({name:"maximum",argument:t.maximum,message:"must be less than "+t.maximum}):e<=t.maximum||r.addError({name:"maximum",argument:t.maximum,message:"must be less than or equal to "+t.maximum}),r},n.exclusiveMinimum=function(e,t,r,n){if("boolean"!=typeof t.exclusiveMaximum&&this.types.number(e))return r=new h(e,t,r,n),e>t.exclusiveMinimum||r.addError({name:"exclusiveMinimum",argument:t.exclusiveMinimum,message:"must be strictly greater than "+t.exclusiveMinimum}),r},n.exclusiveMaximum=function(e,t,r,n){if("boolean"!=typeof t.exclusiveMaximum&&this.types.number(e))return r=new h(e,t,r,n),e<t.exclusiveMaximum||r.addError({name:"exclusiveMaximum",argument:t.exclusiveMaximum,message:"must be strictly less than "+t.exclusiveMaximum}),r};function a(e,t,r,n,a,i){if(this.types.number(e)){var o=t[a];if(0==o)throw new f(a+" cannot be zero");t=new h(e,t,r,n),r=u.getDecimalPlaces(e),n=u.getDecimalPlaces(o),r=Math.max(r,n),n=Math.pow(10,r);return Math.round(e*n)%Math.round(o*n)!=0&&t.addError({name:a,argument:o,message:i+JSON.stringify(o)}),t}}function i(e,t,r){for(var n=r.length,a=t+1;a<n;a++)if(u.deepCompareStrict(e,r[a]))return!1;return!0}n.multipleOf=function(e,t,r,n){return a.call(this,e,t,r,n,"multipleOf","is not a multiple of (divisible by) ")},n.divisibleBy=function(e,t,r,n){return a.call(this,e,t,r,n,"divisibleBy","is not divisible by (multiple of) ")},n.required=function(t,e,r,n){var a=new h(t,e,r,n);return void 0===t&&!0===e.required?a.addError({name:"required",message:"is required"}):this.types.object(t)&&Array.isArray(e.required)&&e.required.forEach(function(e){void 0===c(t,e)&&a.addError({name:"required",argument:e,message:"requires property "+JSON.stringify(e)})}),a},n.pattern=function(e,t,r,n){if(this.types.string(e)){r=new h(e,t,r,n),n=t.pattern;try{var a=new RegExp(n,"u")}catch(e){a=new RegExp(n)}return e.match(a)||r.addError({name:"pattern",argument:t.pattern,message:"does not match pattern "+JSON.stringify(t.pattern.toString())}),r}},n.format=function(e,t,r,n){if(void 0!==e)return(r=new h(e,t,r,n)).disableFormat||u.isFormat(e,t.format,this)||r.addError({name:"format",argument:t.format,message:"does not conform to the "+JSON.stringify(t.format)+" format"}),r},n.minLength=function(e,t,r,n){if(this.types.string(e))return r=new h(e,t,r,n),n=e.match(/[\uDC00-\uDFFF]/g),e.length-(n?n.length:0)>=t.minLength||r.addError({name:"minLength",argument:t.minLength,message:"does not meet minimum length of "+t.minLength}),r},n.maxLength=function(e,t,r,n){if(this.types.string(e))return r=new h(e,t,r,n),n=e.match(/[\uDC00-\uDFFF]/g),e.length-(n?n.length:0)<=t.maxLength||r.addError({name:"maxLength",argument:t.maxLength,message:"does not meet maximum length of "+t.maxLength}),r},n.minItems=function(e,t,r,n){if(this.types.array(e))return r=new h(e,t,r,n),e.length>=t.minItems||r.addError({name:"minItems",argument:t.minItems,message:"does not meet minimum length of "+t.minItems}),r},n.maxItems=function(e,t,r,n){if(this.types.array(e))return r=new h(e,t,r,n),e.length<=t.maxItems||r.addError({name:"maxItems",argument:t.maxItems,message:"does not meet maximum length of "+t.maxItems}),r},n.uniqueItems=function(e,t,r,n){if(!0===t.uniqueItems&&this.types.array(e))return t=new h(e,t,r,n),e.every(i)||t.addError({name:"uniqueItems",message:"contains duplicate item"}),t},n.dependencies=function(t,e,r,n){if(this.types.object(t)){var a,i,o,s=new h(t,e,r,n);for(a in e.dependencies)void 0!==t[a]&&(o=e.dependencies[a],i=n.makeChild(o,a),"string"==typeof o&&(o=[o]),Array.isArray(o)?o.forEach(function(e){void 0===t[e]&&s.addError({name:"dependencies",argument:i.propertyPath,message:"property "+e+" not found, required by "+i.propertyPath})}):(o=this.validateSchema(t,o,r,i),s.instance!==o.instance&&(s.instance=o.instance),o&&o.errors.length&&(s.addError({name:"dependencies",argument:i.propertyPath,message:"does not meet dependency required by "+i.propertyPath}),s.importErrors(o))));return s}},n.enum=function(e,t,r,n){if(void 0===e)return null;if(!Array.isArray(t.enum))throw new f("enum expects an array",t);r=new h(e,t,r,n);return t.enum.some(u.deepCompareStrict.bind(null,e))||r.addError({name:"enum",argument:t.enum,message:"is not one of enum values: "+t.enum.map(String).join(",")}),r},n.const=function(e,t,r,n){if(void 0===e)return null;r=new h(e,t,r,n);return u.deepCompareStrict(t.const,e)||r.addError({name:"const",argument:t.const,message:"does not exactly match expected constant: "+t.const}),r},n.not=n.disallow=function(t,r,n,a){var i=this;if(void 0===t)return null;var o=new h(t,r,n,a),e=r.not||r.disallow;return e?((e=Array.isArray(e)?e:[e]).forEach(function(e){i.testType(t,r,n,a,e)&&(e=e&&(e.$id||e.id)||e,o.addError({name:"not",argument:e,message:"is of prohibited type "+e}))}),o):null},e.exports=r},function(V,e,t){"use strict";var u;function i(e,t){const r=c(e),n=c(t),a=r.pop(),i=n.pop(),o=h(r,n);return 0!==o?o:a&&i?h(a.split("."),i.split(".")):a||i?a?-1:1:0}t.r(e),(P=u=u||{})[P.Active=0]="Active",P[P.Paused=1]="Paused",P[P.Cancelled=2]="Cancelled";const s=(e,t,r)=>{Z(r);e=i(e,t);return o[r].includes(e)},r=(i.validate=e=>"string"==typeof e&&/^[v\d]/.test(e)&&r.test(e),i.compare=s,i.sastisfies=(e,t)=>{var r=t.match(/^([<>=~^]+)/),r=r?r[1]:"=";if("^"!==r&&"~"!==r)return s(e,t,r);var[e,n,a]=c(e),[t,i,o]=c(t);return 0===l(e,t)&&("^"===r?0<=h([n,a],[i,o]):0===l(n,i)&&0<=l(a,o))},/^[v^~<>=]*?(\d+)(?:\.([x*]|\d+)(?:\.([x*]|\d+)(?:\.([x*]|\d+))?(?:-([\da-z\-]+(?:\.[\da-z\-]+)*))?(?:\+[\da-z\-]+(?:\.[\da-z\-]+)*)?)?)?$/i),c=e=>{if("string"!=typeof e)throw new TypeError("Invalid argument expected string");const t=e.match(r);if(t)return t.shift(),t;throw new Error(`Invalid argument not valid semver ('${e}' received)`)},n=e=>"*"===e||"x"===e||"X"===e,a=e=>{var t=parseInt(e,10);return isNaN(t)?e:t},l=(e,t)=>{if(n(e)||n(t))return 0;e=a(e),t=a(t);var[e,t]=typeof e!=typeof t?[String(e),String(t)]:[e,t];return t<e?1:e<t?-1:0},h=(t,r)=>{for(let e=0;e<Math.max(t.length,r.length);e++){var n=l(t[e]||0,r[e]||0);if(0!==n)return n}return 0},o={">":[1],">=":[0,1],"=":[0],"<=":[-1,0],"<":[-1]},f=Object.keys(o),Z=e=>{if("string"!=typeof e)throw new TypeError("Invalid operator type, expected string but got "+typeof e);if(-1===f.indexOf(e))throw new Error("Invalid operator, expected one of "+f.join("|"))};var p=globalThis.SymBfw,d=p.globals,m=p.constants.BROWSER_TYPE;function g(e,t,r){return e.some(function(e){return e[t]&&e[t].toLowerCase()===r.toLowerCase()})}function y(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,a,i=r.call(e),o=[];try{for(;(void 0===t||0<t--)&&!(n=i.next()).done;)o.push(n.value)}catch(e){a={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(a)throw a.error}}return o}var v="DA2780AF-E99F-4740-82E9-B926E50F3F97",b="ad606587-6be2-457d-a79d-51b9f81df46e",k="30c3a504-6b80-482c-bb99-1e61486b4974",M="e64779f5-fbb2-4d6f-a163-57f6f1553f76",N="multivariate_rules_alarm",U="multivariate_rules_alarm_retry",q=p.extensionAdapter,D=p.utils,w=p.logger,L=(O._isCurrentLocaleApplicable=function(e){if(0===e.length)return!0;r=navigator.language.split("-"),n=function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,a,i=r.call(e),o=[];try{for(;(void 0===t||0<t--)&&!(n=i.next()).done;)o.push(n.value)}catch(e){a={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(a)throw a.error}}return o}(r,2),t=n[0],n=n[1],t={language:t},r[1]&&(t.region=n);var t,r=t.language,n=t.region;return g(e,"locale",n?"".concat(r,"-").concat(n):r)||g(e,"region",n)},O._isBrowserApplicable=function(e){if(0===e.length)return!0;var t,r,n=function(){var e=[];switch(d.BROWSER){case m.EDGE_CHROMIUM:e=navigator.userAgent.split("Edg/")[1].split(" ");break;case m.FIREFOX:case m.CHROME:e=navigator.userAgent.split("".concat(d.BROWSER,"/"))[1].split(" ");break;default:e=[]}return{browserName:p.globals.BROWSER,version:e[0]}}(),a=n.browserName,n=n.version,a=(r=e,t=a.toLowerCase(),r.findIndex(function(e){return e.name&&e.name.toLowerCase()===t.toLowerCase()}));return-1!==a&&(!(r=e[a].version)||0<=i(n,r))},O._isAppAndSubCategoryApplicable=function(e,t,r){return e.appName.toLowerCase()===t.toLowerCase()&&(!e.subCategory||e.subCategory.toLowerCase()===r.toLowerCase())},O._isCategoryApplicable=function(e,t,r){return e.category.toLowerCase()===t.toLowerCase()&&(!e.subCategory||e.subCategory.toLowerCase()===r.toLowerCase())},O._isProductApplicable=function(e,t){var r,n;if(0===e.length)return!0;var a=q.getExtensionId();try{for(var i=function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return{value:(e=e&&n>=e.length?void 0:e)&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(e),o=i.next();!o.done;o=i.next()){var s=o.value;if(s.appId){if(s.appId===a)return!0}else if(s.appName){if(O._isAppAndSubCategoryApplicable(s,t.appName,t.subCategory))return!0}else if(s.category){if(O._isCategoryApplicable(s,t.category,t.subCategory))return!0}else if(s.subCategory&&s.subCategory.toLowerCase()===t.subCategory.toLowerCase())return!0}}catch(e){r={error:e}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}return!1},O._isOperatingSystemApplicable=function(e){return 0===e.length||g(e,"name",D.getOSType())},O._isTestApplicableForUser=function(e,t){if(!e)return!0;e=new Date(t);return e.setDate(e.getDate()+1),new Date<e},O.isTestTargetApplicable=function(e,t){return e.locations&&!O._isCurrentLocaleApplicable(e.locations)?(w.log("Target locale is not matched."),!1):e.browsers&&!O._isBrowserApplicable(e.browsers)?(w.log("Target browser is not matched."),!1):e.products&&!O._isProductApplicable(e.products,t)?(w.log("Target product is not matched."),!1):e.operatingSystems&&!O._isOperatingSystemApplicable(e.operatingSystems)?(w.log("Target OS is not matched."),!1):e.isOnlyForNewUsers&&!O._isTestApplicableForUser(e.isOnlyForNewUsers,t.installDate)?(w.log("Target NOT matched, test is not applicable to this user."),!1):(w.log("All targets are matched."),!0)},O),J=p.utils,A=(E.getApplicableVariant=function(e,t,r){var n,a;if(!(e&&t&&r&&r.settingsStorage))throw new Error("Invalid arguments");var r=r.settingsStorage,i=(i=E._getUserRangeFromStorage(e,r))||E._createRandomUserRange(),o=0,s=new Map,u=(t.forEach(function(e){s.set(e.variantId,o+e.percentage),o+=e.percentage}),null);try{for(var c=function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return{value:(e=e&&n>=e.length?void 0:e)&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(s.entries()),l=c.next();!l.done;l=c.next()){var h=function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,a,i=r.call(e),o=[];try{for(;(void 0===t||0<t--)&&!(n=i.next()).done;)o.push(n.value)}catch(e){a={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(a)throw a.error}}return o}(l.value,2),f=h[0];if(i<=h[1]){u=f;break}}}catch(e){n={error:e}}finally{try{l&&!l.done&&(a=c.return)&&a.call(c)}finally{if(n)throw n.error}}return[u,i]},E._getUserRangeFromStorage=function(e,t){return t.getUserRangeForTest(e)},E.setUserRangeInStorage=function(e,t,r){r.setUserRangeForTest(e,t)},E._createRandomUserRange=function(){var e=J.getRandomIntInRange(0,100),t=100!==e?J.getRandomIntInRange(0,99):0;return e+Number((t/100).toFixed(2))},E),S=p.logger,B=(x.prototype.init=function(e){var i=this,o={overallTestsState:e.overallTestsState,tests:[]},s=this._config.settingsStorage.getProcessedRules();s&&(o.overallTestsState=u.Active),e.overallTestsState===u.Cancelled||e.overallTestsState===u.Paused&&!s||e.tests.forEach(function(t){var r,e,n,a;if(t.testState!==u.Cancelled)return r=s&&s.tests.find(function(e){return e.id===t.id}),t.testState===u.Paused&&r?(o.tests.push(r),void S.debug("This test testId: ".concat(t.id," is paused, but retained for existing user"))):t.winnerVariantId?(S.debug("winner variant is declared, test.testState: ".concat(t.testState,", testId: ").concat(t.id,", variantId: ").concat(t.winnerVariantId)),(e={id:t.id,description:t.description,category:t.category,testState:t.testState,startTimestamp:t.target.startTimestamp,duration:t.target.duration,variant:t.variants.find(function(e){return e.variantId===t.winnerVariantId})}).variant||(S.error("No variant data section found for declared winner variant id, so falling back to storage data.\n                        test.testState: ".concat(t.testState,", testId: ").concat(t.id,", variantId: ").concat(t.winnerVariantId)),r&&(e.variant=t.variants.find(function(e){return e.variantId===r.variant.variantId}))),void o.tests.push(e)):r?(S.debug("Test rule already exist in storage, so updating only test state and variant data"),(e={id:r.id,description:r.description,category:r.category,testState:r.testState,startTimestamp:r.startTimestamp,duration:r.duration,variant:t.variants.find(function(e){return e.variantId===r.variant.variantId})}).variant.variantState===u.Cancelled?void S.debug("This test testId: ".concat(t.id," variant: ").concat(e.variant.variantId," is cancelled, variant ignored")):e.variant.variantState===u.Paused?(o.tests.push(r),void S.debug("This test testId: ".concat(t.id," variant: ").concat(e.variant.variantId," is paused, variant retained"))):void o.tests.push(e)):void(t.testState===u.Active&&x._isTestDurationValid(t.target.startTimestamp,t.target.duration)&&L.isTestTargetApplicable(t.target,i._config)&&(a=y(i._getApplicableVariant(t.id,t.variants,i._config),2),n=a[0],a=a[1],n?(e={id:t.id,description:t.description,category:t.category,testState:t.testState,startTimestamp:t.target.startTimestamp,duration:t.target.duration,variant:t.variants.find(function(e){return e.variantId===n})}).variant.variantState===u.Active&&(S.debug("New user enrolled, userRangeValue: ".concat(a,", testId: ").concat(t.id,", variantId: ").concat(n)),A.setUserRangeInStorage(t.id,a,i._config.settingsStorage),o.tests.push(e)):n||t.testState!==u.Active||(S.debug("New user NOT enrolled, userRangeValue: ".concat(a,", testId: ").concat(t.id,", variantId: ").concat(n)),A.setUserRangeInStorage(t.id,a,i._config.settingsStorage))));S.debug("This test is cancelled, test.testState: ".concat(t.testState,", testId: ").concat(t.id))}),this._config.settingsStorage.setProcessedRules(o)},x.prototype._getApplicableVariant=function(e,t,r){try{var n=y(A.getApplicableVariant(e,t,r),2);return[n[0],n[1]]}catch(e){S.error("Exception received from RangeValueMatcher.getApplicableVariant : ".concat(e))}return[null,-1]},x.prototype.getApplicableTestToVariantMap=function(){return this._config.settingsStorage.getProcessedRules()},x._isTestDurationValid=function(e,t){if(!e||e<=0)return S.error("Invalid test starttimestamp (".concat(e,") received.")),!1;if(!t)return S.error("Invalid test duration (".concat(JSON.stringify(t),") received.")),!1;var r=new Date,e=new Date(e),n=new Date(e.getTime()),t=(t.months&&n.setMonth(n.getMonth()+t.months),t.days&&n.setDate(n.getDate()+t.days),t.hours&&n.setHours(n.getHours()+t.hours),e<=r&&r<=n);return t||S.log("Test duration is not within the AB testing period"),t},x),H=t(3);function x(e){this._config=e,this.getApplicableTestToVariantMap=this.getApplicableTestToVariantMap.bind(this)}function E(){}function O(){}function _(e,o,s,u){return new(s=s||Promise)(function(r,t){function n(e){try{i(u.next(e))}catch(e){t(e)}}function a(e){try{i(u.throw(e))}catch(e){t(e)}}function i(e){var t;e.done?r(e.value):((t=e.value)instanceof s?t:new s(function(e){e(t)})).then(n,a)}i((u=u.apply(e,o||[])).next())})}function j(n,a){var i,o,s,u={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(r){return function(e){var t=[r,e];if(i)throw new TypeError("Generator is already executing.");for(;u;)try{if(i=1,o&&(s=2&t[0]?o.return:t[0]?o.throw||((s=o.return)&&s.call(o),0):o.next)&&!(s=s.call(o,t[1])).done)return s;switch(o=0,(t=s?[2&t[0],s.value]:t)[0]){case 0:case 1:s=t;break;case 4:return u.label++,{value:t[1],done:!1};case 5:u.label++,o=t[1],t=[0];continue;case 7:t=u.ops.pop(),u.trys.pop();continue;default:if(!((s=0<(s=u.trys).length&&s[s.length-1])||6!==t[0]&&2!==t[0])){u=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){u.label=t[1];break}if(6===t[0]&&u.label<s[1]){u.label=s[1],s=t;break}if(s&&u.label<s[2]){u.label=s[2],u.ops.push(t);break}s[2]&&u.ops.pop(),u.trys.pop();continue}t=a.call(n,u)}catch(e){t=[6,e],o=0}finally{i=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}}}var G={$id:"#/definitions/MultiVariantTestingRules",$schema:"http://json-schema.org/draft-07/schema#",type:"object",properties:{version:{type:"integer"},overallTestsState:{type:"integer"},tests:{type:"array",minItems:1,uniqueItems:!0,items:{type:"object",properties:{id:{type:"string"},category:{type:"string"},description:{type:"string"},testState:{type:"integer"},target:{type:"object",properties:{location:{type:"array",items:{type:"object",properties:{region:{type:"string"},locale:{type:"string"}}}},browsers:{type:"array",items:{type:"object",properties:{name:{type:"string"},version:{type:"string"}}}},operatingSystems:{type:"array",items:{type:"object",properties:{name:{type:"string"},version:{type:"string"}}}},products:{type:"array",items:{type:"object",properties:{category:{type:"string"},subCategory:{type:"string"},appName:{type:"string"},appId:{type:"string"}}}},isOnlyForNewUsers:{type:"boolean"},startTimestamp:{type:"integer"},duration:{type:"object",properties:{months:{type:"integer"},days:{type:"integer"},hours:{type:"integer"}}},maxUsers:{type:"integer"}}},variants:{type:"array",minItems:1,uniqueItems:!0,items:{type:"object",properties:{variantId:{type:"string"},description:{type:"string"},percentage:{type:"number"},variantState:{type:"integer"},data:{type:"array",items:{type:"object",properties:{product:{type:"string"},oCode:{type:"string"}}}}},required:["variantId","percentage","variantState"]}}},required:["id","category","testState","target","variants"]}}}},K=p.alarmHelper,W=p.cdnFileDownloader,R=p.logger,X=p.utils;I._startScheduler=function(){return _(this,void 0,void 0,function(){return j(this,function(e){switch(e.label){case 0:return I._canDownloadRules()?[4,I._downloadRules()]:[3,2];case 1:e.sent(),e.label=2;case 2:return I._registerScheduler(),[2]}})})},I._registerScheduler=function(){return _(this,void 0,void 0,function(){var t;return j(this,function(e){switch(e.label){case 0:return t=I._config,[4,K.setAlarm(N,{periodInMinutes:t.schedulerInterval/6e4})];case 1:return e.sent(),[2]}})})},I._registerRetryScheduler=function(){return _(this,void 0,void 0,function(){return j(this,function(e){switch(e.label){case 0:return[4,K.setAlarm(U,{delayInMinutes:30})];case 1:return e.sent(),[2]}})})},I._canDownloadRules=function(){var e=I._config.settingsStorage.getRulesDownloadedTimeStamp();return!!X.isNil(e)||e+I._config.schedulerInterval<=Date.now()},I._downloadRules=function(){return _(this,void 0,void 0,function(){var t;return j(this,function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,W.getPayloadFromCdnFile(I._config.rulesJsonCdnPath,I._config.rulesRootCA,I._config.certInfo)];case 1:return t=e.sent(),R.log("".concat(I._config.rulesJsonCdnPath," downloaded successfully.")),R.log(t),I._config.settingsStorage.setRulesDownloadedTimeStamp(Date.now()),I._isRulesValid(t)&&I._isRulesUpdated(t)?(R.log("".concat(I._config.rulesJsonCdnPath," validation succeeded.")),I._callback(t),I._config.settingsStorage.setRulesVersion(t.version),[2,!0]):[3,3];case 2:return t=e.sent(),R.error("Fetching ".concat(I._config.rulesJsonCdnPath," from CDN failed.\n").concat(t)),I._registerRetryScheduler(),[3,3];case 3:return[2,!1]}})})},I._isRulesUpdated=function(e){var e=e.version,t=I._config.settingsStorage.getRulesVersion();return!t||t<e?(R.log("Rules json contains new version."),!0):(R.log("Rules json does not contain new version."),!1)},I._isRulesValid=function(e){e=(new H.Validator).validate(e,G);return e.valid||R.error("jsonschema validation reports following errors. \n".concat(e.errors)),e.valid},I.handleSchedulerEvent=function(e){X.isNil(I._config)||e.name!==N&&e.name!==U||I._startScheduler()},I.prototype.init=function(t,r){return _(this,void 0,void 0,function(){return j(this,function(e){switch(e.label){case 0:return t.settingsStorage?t.schedulerInterval<=0?(R.error("schedulerInterval is invalid"),[2]):r?(I._config=t,I._callback=r,[4,I._startScheduler()]):(R.error("callback cannot be null"),[2]):(R.error("settingsStorage cannot be null"),[2]);case 1:return e.sent(),[2]}})})};var Y=I;function I(){}p.alarmHelper.registerAlarmListener(I.handleSchedulerEvent);function Q(n,a){var i,o,s,u={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(r){return function(e){var t=[r,e];if(i)throw new TypeError("Generator is already executing.");for(;u;)try{if(i=1,o&&(s=2&t[0]?o.return:t[0]?o.throw||((s=o.return)&&s.call(o),0):o.next)&&!(s=s.call(o,t[1])).done)return s;switch(o=0,(t=s?[2&t[0],s.value]:t)[0]){case 0:case 1:s=t;break;case 4:return u.label++,{value:t[1],done:!1};case 5:u.label++,o=t[1],t=[0];continue;case 7:t=u.ops.pop(),u.trys.pop();continue;default:if(!((s=0<(s=u.trys).length&&s[s.length-1])||6!==t[0]&&2!==t[0])){u=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){u.label=t[1];break}if(6===t[0]&&u.label<s[1]){u.label=s[1],s=t;break}if(s&&u.label<s[2]){u.label=s[2],u.ops.push(t);break}s[2]&&u.ops.pop(),u.trys.pop();continue}t=a.call(n,u)}catch(e){t=[6,e],o=0}finally{i=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}}}var F=function(){return(F=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},C=p.logger,ee=(z.prototype.setProcessedRules=function(e){e?this._settingsStorage.setValue(v,e):C.error("ProcessedRules object should not be null")},z.prototype.getProcessedRules=function(){return this._settingsStorage.getValue(v)},z.prototype.setUserRangeForTest=function(e,t){var r;e&&t?((r={})[e]=t,e=r,(t=this._settingsStorage.getValue(b))?this._settingsStorage.setValue(b,F(F({},t),e)):this._settingsStorage.setValue(b,e)):C.error("Invalid testId or userRange parameters")},z.prototype.getUserRangeForTest=function(e){if(!e)return C.error("Invalid testId"),null;var t=this._settingsStorage.getValue(b);return t?t[e]||null:(C.debug("User Range Settings is not available in storage"),null)},z.prototype.setRulesVersion=function(e){e?this._settingsStorage.setValue(k,e):C.error("invalid rules version")},z.prototype.getRulesVersion=function(){return this._settingsStorage.getValue(k)},z.prototype.setRulesDownloadedTimeStamp=function(e){e?this._settingsStorage.setValue(M,e):C.error("invalid timestamp")},z.prototype.getRulesDownloadedTimeStamp=function(){return this._settingsStorage.getValue(M)},z),T=p.logger,P=($.prototype.setRulesCallback=function(e){this._rulesEngine.init(e);e=this._rulesEngine.getApplicableTestToVariantMap();this._config.onRulesUpdated&&e&&e.tests&&e.tests.length&&this._config.onRulesUpdated(e)},$.prototype.getVariantForTestIds=function(e){var r={tests:[]},n=this._rulesEngine.getApplicableTestToVariantMap();return n&&(n.overallTestsState===u.Cancelled?(e.forEach(function(e){r.tests.push({testId:e,variant:null})}),T.debug("overallTestState is cancelled, so returning null for all test variants")):e.forEach(function(t){var e=n.tests.find(function(e){return e.id===t});return e?e.testState!==u.Cancelled&&e.variant&&e.variant.variantState!==u.Cancelled?(r.tests.push({testId:t,variant:e.variant}),void T.debug("Either testState or variantState is Active / Paused")):(T.debug("Either testState or variantState is cancelled"),void r.tests.push({testId:t,variant:null})):(T.debug("Client is requesting variant data for non-existing test"),void r.tests.push({testId:t,variant:null}))})),r},$.prototype.init=function(r){return e=this,u=function(){var t;return Q(this,function(e){switch(e.label){case 0:return this._config=r,this._rulesEngine=new B(this._config),this.setRulesCallback=this.setRulesCallback.bind(this),this._settingsStorage=new ee(r.settingsStorage),r.settingsStorage=this._settingsStorage,[4,(new Y).init(r,this.setRulesCallback)];case 1:return e.sent(),t=this._rulesEngine.getApplicableTestToVariantMap(),this._config.onRulesUpdated&&t&&t.tests&&t.tests.length&&this._config.onRulesUpdated(t),[2]}})},new(s=(s=o=void 0)||Promise)(function(r,t){function n(e){try{i(u.next(e))}catch(e){t(e)}}function a(e){try{i(u.throw(e))}catch(e){t(e)}}function i(e){var t;e.done?r(e.value):((t=e.value)instanceof s?t:new s(function(e){e(t)})).then(n,a)}i((u=u.apply(e,o||[])).next())});var e,o,s,u},new $);function $(){}function z(e){this._settingsStorage=null,this._settingsStorage=e}e.default={multiVariateTestManager:P,TargetMatcher:L}}],n={},a.m=r,a.c=n,a.d=function(e,t,r){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(a.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)a.d(r,n,function(e){return t[e]}.bind(null,n));return r},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="",a(a.s=13).default;function a(e){if(n[e])return n[e].exports;var t=n[e]={i:e,l:!1,exports:{}};return r[e].call(t.exports,t,t.exports,a),t.l=!0,t.exports}var r,n});